<div *ngIf="showDialog">
	<alm-dialog
		(pfDialogClick)="onButtonClick($event)"
		[dialog]='dialog'
  ></alm-dialog>
</div>
<div class="f8-wi__list-entry">
	<!-- info area -->
  <div class="list-view-pf-main-info padding-0">
    <div class="list-view-pf-left type pull-left f8-wi__list-witype">
      <span class="margin-0 dib">
        {{workItem.attributes['system.number']}}
      </span>
      <span class="color-grey margin-left-10 dib
        {{workItem.relationships?.baseType?.data?.attributes?.icon}}"
        title="{{workItem.relationships?.baseType?.data?.attributes?.name}}">
      </span>
      <span class="f8-wi__list-witype-name">
        {{workItem.relationships?.baseType?.data?.attributes?.name}}
      </span>
    </div>
    <div class="list-view-pf-body">
      <div class="list-view-pf-description">
        <div class="f8-wi__list-title truncate-ellipsis row">
            <div class="f8-wi__list-description">
              <p class="truncate"
                 (click)="onDetailPreview($event)"
                 [innerHTML]="workItem.attributes['system.title']">
              </p>
              <a class="fa fa-list-alt f8-action-icon"
                [routerLink]="[constructUrl(workItem)]"
                tooltip="Open Detail View"
                placement="right"></a>
              <div class="f8-wi__list-parent-info">
                <div *ngIf="workItem.relationships?.parent?.data">
                  <span class="pull-left margin-right-5"> Child of</span>
                  <a class="pull-left"
                    [routerLink]="[constructUrl(parentWI)]">
                    {{ parentWI.attributes['system.number'] }}
                  </a>
                  <span class="color-grey fa margin-h-7 pull-left
                    {{parentWI.relationships?.baseType?.data?.attributes?.icon}}"
                    title="{{ parentWI.relationships?.baseType?.data?.attributes?.name }}">
                  </span>
                  <span class="truncate f8-wi__list-parent-info-title"
                    [innerHTML]="parentWI.attributes['system.title']">
                  </span>
                </div>
              </div>
            </div>
            <div class="f8-wi__list-description">
              <f8-label [labels]="workItem.relationships?.labels?.data ?
                workItem.relationships?.labels?.data : []"
                [truncateAfter]='4'
                [allowDelete]="false"
                (onLabelClick)="labelClick($event)"></f8-label>
            </div>
            <div class="f8-wi__list-description f8-wi__list-description-state">
              <span class="pull-left padding-v-2"
                almIcon
                [iconType]="workItem.attributes['system.state']"
                tooltip="{{workItem.attributes['system.state']}}"
                placement="right">
              </span>
              <span class="pull-left f8-wi__list-description-state-text padding-v-2">
                {{ workItem.attributes['system.state'] }}
              </span>
            </div>
        </div>
        <div class="list-group-item-text hide f8-wi__list-desc">
          {{workItem.attributes['system.description'] ?
          workItem.attributes['system.description'] :
          "No description available for this work item."}}
        </div>
      </div>
    </div>
    <div class="user-avatar margin-right-15">
      <img
        *ngFor="let assignee of workItem.relationships.assignees.data"
        placement="left"
        tooltip="{{assignee?.attributes?.fullName}}"
        src="{{assignee?.attributes?.imageURL + '&s=23'}}"
        onError="this.src='https://avatars0.githubusercontent.com/u/563119?v=3&s=23'" />
      <span class="pficon-user not-assigned-user-icon"
        *ngIf="!workItem.relationships?.assignees?.data?.length"
        tooltip="Unassigned"
        placement="left"></span>
    </div>
    <div class="pull-right margin-left-15"
      tooltip="Open Quick Preview"
      placement="left">
      <a (click)="onDetailPreview($event)"
        class="fa fa-columns f8-action-icon"></a>
    </div>
  </div>
</div>
