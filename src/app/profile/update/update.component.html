<div id="overview" class="container content padding-top-15">
  <div class="row">
    <h1>Profile</h1>
    <!-- left column -->
    <div class="col-xs-12 col-sm-3 col-md-2">
      <!--<div class="row">-->
      <div>
        <div *ngIf="(context.user.attributes.imageURL !== undefined && context.user.attributes.imageURL.length !== 0); then showImageURL else addImageURL"></div>
        <ng-template #showImageURL>
          <img src="{{context.user.attributes.imageURL}}" class="profile-img">
        </ng-template>
        <ng-template #addImageURL>
          <img src="../../../assets/images/profile-user.png" class="profile-img-none">
        </ng-template>
        <h3 class="col-sm-12 profile-wrapper-username">{{context?.user?.attributes?.fullName}}</h3>
        <p class="col-sm-12 profile-wrapper-username">
          {{context?.user?.attributes?.username}}
        </p>
        <hr/>
        <p class="col-sm-12 profile-wrapper-email">
          <span class="fa fa-envelope"></span>
          <a href="javascript:void(0)" class="margin-left-5 margin-right-5"
              (click)="setElementFocus($event, _email)">Add an email</a>
        </p>
        <p class="col-sm-12 profile-wrapper-url">
          <span class="fa fa-external-link"></span>
          <a href="javascript:void(0)" class="margin-left-5 margin-right-5"
              (click)="setElementFocus($event, _url)">Add a url</a>
        </p>
        <p class="col-sm-12 profile-wrapper-bio">
          <a href="javascript:void(0)" class="margin-left-5 margin-right-5"
              (click)="setElementFocus($event, _bio)">Add a bio</a>
        </p>
      </div>
      <!--</div>-->
    </div>
    <!-- center column -->
    <div class="col-xs-12 col-sm-8 col-md-8">
      <form role="form">
        <div class="form-group">
          <p class="help-block">The fields marked with <span class="required-pf">*</span> are required.</p>
        </div>
        <div class="form-group">
          <label>Username:</label>
          {{username}}<span class="pficon pficon-ok margin-left-10"></span>
        </div>
        <div class="form-group">
          <div *ngIf="gitHubLinked && openShiftLinked; then allLinked else allUnlinked"></div>
          <ng-template #allLinked>
            <label>
              Authorized accounts
            </label>
          </ng-template>
          <ng-template #allUnlinked>
            <label>
              Select accounts to authorize
            </label>
          </ng-template>
        </div>
        <div class="form-group">
          <div *ngIf="gitHubLinked; then ghLinked else ghUnlinked"></div>
          <ng-template #ghLinked>
            You've authorized GitHub <span class="pficon pficon-ok margin-left-10"></span>
          </ng-template>
          <ng-template #ghUnlinked>
            <div class="checkbox">
              <input type="checkbox" id="authGitHub" name="authGitHub"
                      [(ngModel)]="authGitHub">
              <label for="authGitHub" class="required-pf">GitHub</label>
            </div>
          </ng-template>
        </div>
        <div class="form-group">
          <div *ngIf="openShiftLinked; then osoLinked else osoUnlinked"></div>
          <ng-template #osoLinked>
            You've authorized OpenShift.com <span class="pficon pficon-ok margin-left-10"></span>
          </ng-template>
          <ng-template #osoUnlinked>
            <div class="checkbox">
              <input type="checkbox" id="authOpenShift" name="authOpenShift"
                      [(ngModel)]="authOpenShift">
              <label for="authOpenShift" class="required-pf">OpenShift.com</label>
            </div>
          </ng-template>
        </div>
        <div class="form-group">
          <button class="btn btn-lg btn-default" id="connect"
                  [disabled]="isConnectAccountsDisabled"
                  (click)="connectAccounts()">Connect accounts</button>
        </div>
        <div class="form-group">
          <label for="fullName" class="control-label">Name</label>
          <div [ngClass]="{'has-error': fullNameInvalid}">
            <input type="text" class="form-control" id="fullName" name="fullName"
                    placeholder="Enter your full name"
                    [(ngModel)]="fullName">
          </div>
        </div>
        <div class="form-group">
          <label for="email" class="control-label required-pf">Email</label>
          <div [ngClass]="{'has-error': emailInvalid}">
            <input type="email" class="form-control" id="email" name="email" #_email
                    placeholder="name@gmail.com"
                    [(ngModel)]="email"
                    (change)="validateEmail()">
          </div>
        </div>
        <div class="form-group">
          <label for="company" class="control-label">Company</label>
          <div [ngClass]="{'has-error': companyInvalid}">
            <input type="text" class="form-control" id="company" name="company"
                    placeholder="name@gmail.com"
                    [(ngModel)]="company">
          </div>
        </div>
        <div class="form-group">
          <label for="previewImg" class="control-label padding-left-0">Profile photo</label>
        </div>
        <div class="form-group">
          <div class="col-xs-12 preview-cont padding-left-0">
            <img id="previewImg" src="{{imageUrl}}" class="col-xs-2 preview-img padding-left-0"
                *ngIf="imageUrl !== undefined && imageUrl.length > 0">
            <img id="previewImg" src="../../../assets/images/profile-user.png" class="col-xs-2 preview-img-none"
                *ngIf="imageUrl === undefined || imageUrl.length === 0">
            <span class="col-xs-8 col-sm-6 col-md-7 preview-field" [ngClass]="{'has-error': imageUrlInvalid}">
              <input type="text" class="form-control" id="imageUrl" name="imageUrl" #_imageUrl
                    placeholder="http://www.myphoto.com"
                    [(ngModel)]="imageUrl"
                    (change)="validateImageUrl()">
            </span>
            <button class="col-xs-2 col-sm-3 btn btn-default preview-btn" id="linkImageUrl"
                    [disabled]="imageUrlInvalid"
                    (click)="linkImageUrl()">
              <i class="pficon pficon-arrow"></i> Link Profile Photo
            </button>
          </div>
        </div>
        <div class="form-group">
          <label for="url" class="control-label">URL</label>
          <div [ngClass]="{'has-error': urlInvalid}">
            <input type="text" class="form-control" id="url" name="url" #_url
                  placeholder="http://www.myprofile.com"
                  [(ngModel)]="url"
                  (change)="validateUrl()">
          </div>
        </div>
        <div class="form-group">
          <label for="bio">Bio</label>
          <alm-remainingchars [config]="remainingCharsConfig" #_bio
                              (onChange)="handleBioChange($event)"></alm-remainingchars>
          <span class="pull-right chars-remaining-pf">
            <span #remainingCountElement></span>
            <span class="fields-status-pf">characters remaining</span>
          </span>
        </div>

        <div class="form-group">
          <label for="experimental" class="control-label">Turn on experimental features</label>
          <div [ngClass]="{'has-error': urlInvalid}">
            <input type="checkbox" class="form-control" id="experimental" name="experimental" #_experimental
                   [(ngModel)]="isExperimental">
          </div>
        </div>

        <div class="col-xs-12 padding-left-0">
          <div class="padding-top-10">
            <h2>Privacy</h2>
          </div>
          <div class="form-group padding-top-10">
            <div class="col-sm-6 col-lg-7 padding-left-0 padding-right-0">
              <label for="showFullName" class="control-label">Display name in your public profile</label>
            </div>
            <div class="col-sm-6 col-lg-5 padding-left-0">
              <bSwitch id="showFullName" name="showFullName"
                      [switch-disabled]="true"
                      [(ngModel)]="showFullName"></bSwitch>
            </div>
          </div>
          <div class="form-group padding-top-40">
            <div class="col-sm-6 col-lg-7 padding-left-0 padding-right-0">
              <label for="showEmail" class="control-label">Display email in your public profile</label>
            </div>
            <div class="col-sm-6 col-lg-5 col-lg-5 padding-left-0">
              <bSwitch id="showEmail" name="showEmail"
                      [switch-disabled]="true"
                      [(ngModel)]="showEmail"></bSwitch>
            </div>
          </div>
          <div class="form-group padding-top-40">
            <div class="col-sm-6 col-lg-7 padding-left-0 padding-right-0">
              <label for="showActivity" class="control-label">Display activity in your public profile</label>
            </div>
            <div class="col-sm-6 col-lg-5 padding-left-0">
              <bSwitch id="showActivity" name="showActivity"
                      [switch-disabled]="true"
                      [(ngModel)]="showActivity"></bSwitch>
            </div>
          </div>
          <div class="form-group padding-top-40">
            <div class="col-sm-6 col-lg-7 padding-left-0 padding-right-0">
              <label for="showSpaces" class="control-label">Display Spaces in your public profile</label>
            </div>
            <div class="col-sm-6 col-lg-5 padding-left-0">
              <bSwitch id="showSpaces" name="showSpaces"
                      [switch-disabled]="true"
                      [(ngModel)]="showSpaces"></bSwitch>
            </div>
          </div>
          <div class="form-group padding-top-40">
            <div class="col-sm-6 col-lg-7 padding-left-0 padding-right-0">
              <label for="showWorkItems" class="control-label">Display work items assigned to you in your public profile</label>
            </div>
            <div class="col-sm-6 col-lg-5 padding-left-0">
              <bSwitch id="showWorkItems" name="showWorkItems"
                      [switch-disabled]="true"
                      [(ngModel)]="showWorkItems"></bSwitch>
            </div>
          </div>
        </div>
        <div class="col-xs-12 padding-left-0">
          <div class="form-group padding-top-30">
            <h2>Advanced</h2>
          </div>
          <div class="form-group">
            <label for="token" class="control-label margin-top-15">Personal Access Token</label>
            <div class="panel panel-default" id="token">
              <div class="panel-heading token-heading-cont">
                <i class="padding-top-13 fa"
                  [ngClass]="{'fa-angle-down': tokenPanelOpen, 'fa-angle-right': !tokenPanelOpen}"
                  (click)="toggleTokenPanel()"></i>
                <p class="token-heading padding-top-10 padding-right-15 margin-right-5"
                  [ngClass]="{'padding-left-11': tokenPanelOpen, 'padding-left-15': !tokenPanelOpen}">{{token}}</p>
                <button class="btn btn-lg btn-default"
                        (click)="copyTokenToClipboard()">Copy</button>
              </div>
              <div class="panel-body margin-left-15 margin-right-15" *ngIf="tokenPanelOpen">
                <p class="token-body padding-left-5 padding-right-5">{{token}}</p>
              </div>
            </div>
          </div>
          <div class="form-group">
            <button class="btn btn-lg btn-default"
                    (click)="updateTenent()">Update tenant</button>
          </div>
        </div>
      </form>
    </div>
    <!-- right column -->
    <div class="col-md-2">
      <button class="btn btn-lg btn-primary width-100"
              [disabled]="isUpdateProfileDisabled"
              (click)="updateProfile()">Update Profile</button>
      <div class="margin-top-5">
        <button class="btn btn-lg btn-default width-100"
          (click)="routeToProfile()">Cancel</button>
      </div>
    </div>
  </div>
</div>
