<div class="container-fluid f8-wi-container" #containerHeight>
  <div class="lock-overlay-list"
    *ngIf="uiLockedAll">
    <div class="spinner-container">
      <h2 class="spinner"></h2>
      <h2>Loading ...</h2>
      <h4>Please wait, we are loading your data.</h4>
    </div>
  </div>

  <main class="row">
    <alm-planner-layout #plannerLayout
      (sidePanelStateChange)="togglePanelState($event)"
      [sidePanelContent]="sidePanel"
      [sectionContent]="sectionPanel">
    </alm-planner-layout>
  </main>
</div>

<ng-template #sidePanel>
  <aside class="f8-sidepanel">
    <div class="lock-overlay-list"
      *ngIf="uiLockedSidebar">
      <div class="spinner-container">
        <h2 class="spinner"></h2>
        <h2>Loading ...</h2>
        <h4>Please wait, we are loading your data.</h4>
      </div>
    </div>
    <a class="f8-sidepanel--toggle">
      <span class="fa f8-sidepanel--toggle-icon fa-lg"
        [class.fa-angle-double-left]="sidePanelOpen"
        [class.fa-angle-double-right]="!sidePanelOpen"
        (click)="togglePanel()" tooltip="{{sidePanelOpen ?
          'Hide Panel' : 'Show Panel'}}"
        placement="right">
      </span>
    </a>
    <side-panel
      [sidePanelOpen]="sidePanelOpen">
    </side-panel>
  </aside>
</ng-template>

<ng-template #sectionPanel>
  <div class="width-100 pull-left"
    #toolbarHeight>
    <toolbar-panel
      context="listview"
      [loggedInUser]="loggedInUser">
    </toolbar-panel>
  </div>

  <!-- tableConfig Dropdown -->
  <div class="width-100 pull-left padding-10 posRel">
    <div class="f8-wi-list__quick-add padding-right-15 margin-right-15"
      id="workItemList_up_quickAdd"
      *ngIf="loggedIn"
      #quickaddHeight>
      <alm-work-item-quick-add
        [wilistview]="'wi-table-view-top'"
        [workItemTypes]="workItemTypes"
        [selectedType]="workItemTypes.length ? workItemTypes[0] : null"
        [selectedIteration]="selectedIteration"
        (close)="close($event)">
      </alm-work-item-quick-add>
    </div>
    <div class="f8-wi-list__settings f8-wi__table-config">
      <div class="dropdown-kebab-pf pull-right dropdown margin-left-10"
        dropdown
        [autoClose]="false"
        [isOpen]="isTableConfigOpen"
        (isOpenChange)="tableConfigChange($event)">
        <button class="btn btn-link dropdown-toggle" type="button" dropdownToggle>
          <span class="fa fa-cog"></span>
        </button>
        <div class="dropdown-menu-right dropdown-menu f8-wi-list__settings-dropdown" *dropdownMenu>
          <aside>
            <i class="db text-right fa fa-close btn btn-link" (click)="tableConfigToggle($event)"></i>
          </aside>
          <aside>
            <small>Displayed Atrributes</small>
            <ul class="f8-wi-list__settings-column">
              <li *ngFor='let col of (columns | filterColumn: "showInDisplay")'>
                <input
                  type='checkbox'
                  [id]="col.name"
                  (change)='toggleCheckbox($event, col)'/>
                <label [attr.for]="col.name">{{col.name}}</label>
              </li>
            </ul>
          </aside>
          <aside>
            <span class="db fa fa-angle-right"
              tooltip="Move to Displayed Attributes"
              (click)="moveToDisplay()">
            </span>
            <span class="db fa fa-angle-left"
              tooltip="Move to Available Attributes"
              (click)="moveToAvailable()">
            </span>
          </aside>
          <aside>
            <small>Available Atrributes</small>
            <ul class="f8-wi-list__settings-column">
              <li *ngFor='let col of (columns | filterColumn: "available")'>
                <input
                  type='checkbox'
                  [id]="col.name"
                  (change)='toggleCheckbox($event, col)'/>
                <label [attr.for]="col.name">
                  {{col.name}}
                </label>
              </li>
            </ul>
          </aside>
        </div>
      </div>
    </div>
  </div>

</ng-template>
